
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Case studies of some visualizations &#8212; mayavi 4.6.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<style type="text/css">
  body {
    /* Very bottom copyright, etc. info */
    background: #4d598d;
  }

  .documentwrapper {
    /* Blank area on left bar */
    background: #24326e;
  }

  .related {
    /* Long horizontal nav bars */
    background: #3c4b8a!important;
  }

  .sphinxsidebarwrapper {
    /* Filled part of left sidebar */
    background: #24326e;
  }

  a {
    color: #253370;
  }

  .sphinxsidebarwrapper a {
    color: #f2f2f2!important;
  }
</style>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mayavi 4.6.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="case-studies-of-some-visualizations">
<span id="mlab-case-studies"></span><h1>Case studies of some visualizations<a class="headerlink" href="#case-studies-of-some-visualizations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="visualizing-volumetric-scalar-data">
<h2>Visualizing volumetric scalar data<a class="headerlink" href="#visualizing-volumetric-scalar-data" title="Permalink to this headline">¶</a></h2>
<p>There are three main ways of visualizing a 3D scalar field. Given the
following field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">import numpy as np</span>
<span class="s2">x, y, z = np.ogrid[-10:10:20j, -10:10:20j, -10:10:20j]</span>
<span class="s2">s = np.sin(x*y*z)/(x*y*z)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Iso-Surfaces:</th><td class="field-body"><p class="first">To display iso surfaces of the field, the simplest solution is
simply to use the <code class="docutils literal notranslate"><span class="pre">mlab</span></code> <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour3d" title="mayavi.mlab.contour3d"><code class="xref py py-func docutils literal notranslate"><span class="pre">contour3d()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.contour3d(s)</span>
</pre></div>
</div>
<p><img alt="volumetric_contour3d" src="_images/volumetric_contour3d.jpg" /></p>
<p>The problem with this method is that the outer iso-surfaces tend to hide inner
ones. As a result, quite often only one iso-surface can be visible.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Volume rendering:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Volume rendering is an advanced technique in which each voxel is
given a partly transparent color. This can be achieved with
<cite>mlab.pipeline</cite> using the <a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_field" title="mayavi.tools.pipeline.scalar_field"><code class="xref py py-func docutils literal notranslate"><span class="pre">scalar_field()</span></code></a> source, and the
<cite>volume</cite> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.pipeline.volume(mlab.pipeline.scalar_field(s))</span>
</pre></div>
</div>
<p><img alt="volumetric_volume" src="_images/volumetric_volume.jpg" /></p>
<p>For such a visualization, tweaking the opacity transfer function is
critical to achieve a good effect. Typically, it can be useful to
limit the lower and upper values to the 20 and 80 percentiles of the
data, in order to have a reasonable fraction of the volume
transparent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.pipeline.volume(mlab.pipeline.scalar_field(s), vmin=0, vmax=0.8)</span>
</pre></div>
</div>
<p><img alt="volumetric_volume_tweaked" src="_images/volumetric_volume_tweaked.jpg" /></p>
<p>It is useful to open the module’s dialog (eg through the pipeline
interface, or using it’s <cite>edit_traits()</cite> method) and tweak the color
transfer function to render the transparent low-intensity regions
of the image. <strong>For this module, the LUT as defined in the</strong> <cite>Colors and
legends</cite> <strong>node are not used.</strong></p>
<p class="last">The limitations of volume rendering is that, while it is often very
pretty, it can be difficult to analyze the details of the field with
it.</p>
</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Cut planes:</th><td class="field-body"><p class="first">While less impressive, cut planes are a very informative way of
visualizing the details of a scalar field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.pipeline.image_plane_widget(mlab.pipeline.scalar_field(s),</span>
<span class="s2">                            plane_orientation=&#39;x_axes&#39;,</span>
<span class="s2">                            slice_index=10,</span>
<span class="s2">                        )</span>
<span class="s2">mlab.pipeline.image_plane_widget(mlab.pipeline.scalar_field(s),</span>
<span class="s2">                            plane_orientation=&#39;y_axes&#39;,</span>
<span class="s2">                            slice_index=10,</span>
<span class="s2">                        )</span>
<span class="s2">mlab.outline()</span>
</pre></div>
</div>
<p>Image plane widgets can also being created from NumPy arrays using
the <code class="docutils literal notranslate"><span class="pre">mlab</span></code> <code class="xref py py-func docutils literal notranslate"><span class="pre">volume_slice()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.volume_slice(s, plane_orientation=&#39;x_axes&#39;, slice_index=10)</span>
</pre></div>
</div>
<p><img alt="volumetric_cut_plane" src="_images/volumetric_cut_plane.jpg" /></p>
<p>The image plane widget can only be used on regular-spaced data, as
created by <cite>mlab.pipeline.scalar_field</cite>, but it is very fast. It
should thus be prefered to the scalar cut plane, when possible.</p>
<p>Clicking and dragging the cut plane is an excellent way of exploring
the field.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">A combination of techniques:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Finally, it can be interesting to combine cut planes with
iso-surfaces and thresholding to give a view of the peak areas using
the iso-surfaces, visualize the details of the field with the cut
plane, and the global mass with a large iso-surface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">src = mlab.pipeline.scalar_field(s)</span>
<span class="s2">mlab.pipeline.iso_surface(src, contours=[s.min()+0.1*s.ptp(), ], opacity=0.1)</span>
<span class="s2">mlab.pipeline.iso_surface(src, contours=[s.max()-0.1*s.ptp(), ],)</span>
<span class="s2">mlab.pipeline.image_plane_widget(src,</span>
<span class="s2">                            plane_orientation=&#39;z_axes&#39;,</span>
<span class="s2">                            slice_index=10,</span>
<span class="s2">                        )</span>
</pre></div>
</div>
<p><img alt="volumetric_combination" src="_images/volumetric_combination.jpg" /></p>
<p>In the above example, we have used the pipeline syntax of mayavi
instead of using <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour3d" title="mayavi.mlab.contour3d"><code class="xref py py-func docutils literal notranslate"><span class="pre">contour3d()</span></code></a> and <code class="xref py py-func docutils literal notranslate"><span class="pre">volume_slice()</span></code>
in order to use a single scalar field as data source.</p>
<p class="last">In some cases, though not in our example, it might be usable to
insert a threshold filter before the cut plane, eg:to remove area
with values below ‘s.min()+0.1*s.ptp()’. In this case, the cut plane
needs to be implemented with <cite>mlab.pipeline.scalar_cut_plane</cite> as the data
looses its structure after thresholding.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="visualizing-a-vector-field">
<h2>Visualizing a vector field<a class="headerlink" href="#visualizing-a-vector-field" title="Permalink to this headline">¶</a></h2>
<p>A vector field, i.e., vectors continuously defined in a volume, can be
difficult to visualize, as it contains a lot of information. Let us
explore different visualizations for the velocity field of a multi-axis
convection cell <a class="footnote-reference" href="#id2" id="id1">[1]</a>, in hydrodynamics, as defined by its components
sampled on a grid, <cite>u</cite>, <cite>v</cite>, <cite>w</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">import numpy as np</span>
<span class="s2">x, y, z = np.mgrid[0:1:20j, 0:1:20j, 0:1:20j]</span>

<span class="s2">u =    np.sin(np.pi*x) * np.cos(np.pi*z)</span>
<span class="s2">v = -2*np.sin(np.pi*y) * np.cos(2*np.pi*z)</span>
<span class="s2">w = np.cos(np.pi*x)*np.sin(np.pi*z) + np.cos(np.pi*y)*np.sin(2*np.pi*z)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Quiver:</th><td class="field-body"><p class="first">The simplest visualization of a set of vectors, is using the <cite>mlab</cite>
function <cite>quiver3d</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.quiver3d(u, v, w)</span>
<span class="s2">mlab.outline()</span>
</pre></div>
</div>
<img alt="_images/vector_field_quiver.jpg" src="_images/vector_field_quiver.jpg" />
<p>The main limitation of this visualization is that it positions an
arrow for each sampling point on the grid. As a result the
visualization is very busy.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Masking vectors:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">We can use the fact that we are visualizing a vector field, and not
just a bunch of vectors, to reduce the amount of arrows displayed. For
this we need to build a <cite>vector_field</cite> source, and apply to it the
<cite>vectors</cite> module, with some masking parameters (here we keep only one
point out of 20):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">src = mlab.pipeline.vector_field(u, v, w)</span>
<span class="s2">mlab.pipeline.vectors(src, mask_points=20, scale_factor=3.)</span>
</pre></div>
</div>
<img alt="_images/vector_field_vectors.jpg" src="_images/vector_field_vectors.jpg" />
</td>
</tr>
<tr class="field-odd field"><th class="field-name">A cut plane:</th><td class="field-body"><p class="first">If we are interested in displaying the vectors along a cut, we can
use a cut plane. In particular, we can inspect interactively the
vector field by moving the cut plane along: clicking on it and
dragging it can give a very clear understanding of the vector field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.pipeline.vector_cut_plane(src, mask_points=2, scale_factor=3)</span>
</pre></div>
</div>
<img alt="_images/vector_field_cut_plane.jpg" src="_images/vector_field_cut_plane.jpg" />
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Iso-Surfaces of the magnitude:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">An important parameter of the vector field is its magnitude. It can
be interesting to display iso-surfaces of the normal of the vectors.
For this we can create a scalar field from the vector field using the
ExtractVectorNorm filter, and use the Iso-Surface module on it. When
working interactively, a good understanding of the magnitude of the
field can be gained by changing the values of the contours in the
object’s property dialog.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">magnitude = mlab.pipeline.extract_vector_norm(src)</span>
<span class="s2">mlab.pipeline.iso_surface(magnitude, contours=[1.9, 0.5])</span>
</pre></div>
</div>
<img alt="_images/vector_field_isosurface.jpg" src="_images/vector_field_isosurface.jpg" />
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">The Flow, or the field lines:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">For certain vector fields, the line of flow along the field can
have an interesting meaning. For instance this can be interpreted as a
trajectory in hydrodynamics, or field lines in electro-magnetism.
We can display the flow lines originating for a certain seed surface
using the <cite>streamline</cite> module, or the mlab <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.flow" title="mayavi.mlab.flow"><code class="xref py py-func docutils literal notranslate"><span class="pre">flow()</span></code></a> function,
which relies on <cite>streamline</cite> internally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">flow = mlab.flow(u, v, w, seed_scale=1,</span>
<span class="s2">                          seed_resolution=5,</span>
<span class="s2">                          integration_direction=&#39;both&#39;)</span>
</pre></div>
</div>
<img alt="_images/vector_field_flow.jpg" src="_images/vector_field_flow.jpg" />
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">A combination of techniques:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Giving a meaningful visualization of a vector field is a hard task,
and one must use all the tools at hand to illustrate his purposes. It
is important to choose the message conveyed. No one visualization
will tell all about a vector field. Here is an example of a
visualization made by combining the different tools above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">mlab.figure(fgcolor=(0., 0., 0.), bgcolor=(1, 1, 1))</span>
<span class="s2">src = mlab.pipeline.vector_field(u, v, w)</span>
<span class="s2">magnitude = mlab.pipeline.extract_vector_norm(src)</span>

<span class="s2"># We apply the following modules on the magnitude object, in order to</span>
<span class="s2"># be able to display the norm of the vectors, eg as the color.</span>
<span class="s2">iso = mlab.pipeline.iso_surface(magnitude, contours=[1.9, ], opacity=0.3)</span>

<span class="s2">vec = mlab.pipeline.vectors(magnitude, mask_points=40,</span>
<span class="s2">                                    line_width=1,</span>
<span class="s2">                                    color=(.8, .8, .8),</span>
<span class="s2">                                    scale_factor=4.)</span>

<span class="s2">flow = mlab.pipeline.streamline(magnitude, seedtype=&#39;plane&#39;,</span>
<span class="s2">                                        seed_visible=False,</span>
<span class="s2">                                        seed_scale=0.5,</span>
<span class="s2">                                        seed_resolution=1,</span>
<span class="s2">                                        linetype=&#39;ribbon&#39;,)</span>

<span class="s2">vcp = mlab.pipeline.vector_cut_plane(magnitude, mask_points=2,</span>
<span class="s2">                                        scale_factor=4,</span>
<span class="s2">                                        colormap=&#39;jet&#39;,</span>
<span class="s2">                                        plane_orientation=&#39;x_axes&#39;)</span>
</pre></div>
</div>
<img alt="_images/vector_field_combination.jpg" class="last" src="_images/vector_field_combination.jpg" />
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Although most of this section has been centered on snippets of code
to create visualization objects, it is important to remember that
Mayavi is an interactive program, and that the properties of these
objects can be modified interactively, as described in
<a class="reference internal" href="mlab_changing_object_looks.html#mlab-changing-objects-interactively"><span class="std std-ref">Changing object properties interactively</span></a>. It is often
impossible to choose the best parameters for a visualization before
hand. Colors, contour values, colormap, view angle, etc… should be
chosen interactively. If reproducibiles are required, the chosen
values can be added in the original script.</p>
<p class="last">Moreover, the <cite>mlab</cite> functions expose only a small fraction of the
possibilities of the visualization objects. The dialogs expose more
of these functionalities, that are entirely controlled by the
attributes of the objects returned by the mlab functions. These
objects are very rich, as they are built from VTK objects. It can be
hard to find the right attribute to modify when exploring them, or in
the VTK documentation, thus the easiest way is to modify them
interactively using the pipeline view dialog and use
the <a class="reference internal" href="mlab_changing_object_looks.html#record-feature"><span class="std std-ref">record feature</span></a> to find out the
corresponding lines of code. See
<a class="reference internal" href="pipeline.html#organisation-mayavi-visualisations"><span class="std std-ref">Organisation of Mayavi visualizations: the pipeline</span></a> to understand better the
link between the lines of code generated by the record feature and
<cite>mlab</cite>.
.</p>
</div>
<hr class="docutils" />
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Toussaint, V.; Carriere, P. &amp; Raynal, F. A numerical Eulerian
approach to mixing by chaotic advection Phys. Fluids, 1995, 7, 2587</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mayavi-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Case studies of some visualizations</a><ul>
<li><a class="reference internal" href="#visualizing-volumetric-scalar-data">Visualizing volumetric scalar data</a></li>
<li><a class="reference internal" href="#visualizing-a-vector-field">Visualizing a vector field</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mlab_case_studies.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mayavi 4.6.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2018, Enthought Inc..
      Last updated on Aug 08, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>