
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Organisation of Mayavi visualizations: the pipeline &#8212; mayavi 4.6.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data representation in Mayavi" href="data.html" />
    <link rel="prev" title="Advanced use of Mayavi" href="advanced_use.html" />
<style type="text/css">
  body {
    /* Very bottom copyright, etc. info */
    background: #4d598d;
  }

  .documentwrapper {
    /* Blank area on left bar */
    background: #24326e;
  }

  .related {
    /* Long horizontal nav bars */
    background: #3c4b8a!important;
  }

  .sphinxsidebarwrapper {
    /* Filled part of left sidebar */
    background: #24326e;
  }

  a {
    color: #253370;
  }

  .sphinxsidebarwrapper a {
    color: #f2f2f2!important;
  }
</style>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data.html" title="Data representation in Mayavi"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advanced_use.html" title="Advanced use of Mayavi"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mayavi 4.6.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced_use.html" accesskey="U">Advanced use of Mayavi</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="organisation-of-mayavi-visualizations-the-pipeline">
<span id="organisation-mayavi-visualisations"></span><h1>Organisation of Mayavi visualizations: the pipeline<a class="headerlink" href="#organisation-of-mayavi-visualizations-the-pipeline" title="Permalink to this headline">¶</a></h1>
<div class="topic">
<p class="topic-title first">Mayavi and VTK pipelines</p>
<p>Mayavi uses <a class="reference external" href="http://www.vtk.org">VTK</a> for all its visualization needs.
A pipeline concept underlies all the visualization in VTK. However,
it is important to note that the pipeline used by Mayavi does not
correspond to the VTK pipeline creating the visualization: the layout
is different, the objects are not the same, and there are more nodes
in a VTK pipeline. The two pipelines share some similarities, but in
this section, we are only concerned by the Mayavi pipeline.</p>
</div>
<div class="section" id="anatomy-of-a-mayavi-pipeline">
<h2>Anatomy of a Mayavi pipeline<a class="headerlink" href="#anatomy-of-a-mayavi-pipeline" title="Permalink to this headline">¶</a></h2>
<div class="section" id="layout-of-a-pipeline">
<h3>Layout of a pipeline<a class="headerlink" href="#layout-of-a-pipeline" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The top node of a Mayavi pipeline is called the <cite>Engine</cite>. It is
responsible of the creation and destruction of the scenes. It is not
displayed in the pipeline view.</li>
<li>Below the <cite>Engine</cite>, you find <cite>Scenes</cite>.</li>
<li>Each <cite>Scene</cite> has a set of data <cite>Sources</cite>: they expose the data to
visualize to Mayavi.</li>
<li><cite>Filters</cite> can be applied to the <cite>Sources</cite> to transform the data they
wrap.</li>
<li>A <cite>Module Manager</cite> controls the colors used to represent the scalar or
vector data. It is represented in the pipeline view as the node called
<cite>Colors and legends</cite>.</li>
<li>Visualization <cite>Modules</cite> finally display a reprensation of the data in
the Scene, such as a surface, or lines.</li>
</ul>
</div>
<div class="section" id="navigating-in-the-pipeline">
<h3>Navigating in the pipeline<a class="headerlink" href="#navigating-in-the-pipeline" title="Permalink to this headline">¶</a></h3>
<p>Each object in the pipeline has a <cite>parent</cite> attribute that points to its
parent in the pipeline, as well as a <cite>children</cite> attribute, giving the
list of its children. The <cite>name</cite> attribute of the objects gives the name
of the node as it appears in the pipeline view. The edition dialog to
modify graphicaly the properties of an object can be displayed by calling
the <cite>edit_traits()</cite> method of this object.</p>
<p>In addition, Mayavi pipeline objects can only be in one scene, and their
<cite>.scene</cite> attribute point to this scene (see the
<a class="reference internal" href="auto/example_volume_slicer.html#example-volume-slicer"><span class="std std-ref">Volume slicer example</span></a> for an example of how the data can be shared
between scenes).</p>
</div>
</div>
<div class="section" id="the-link-between-different-mayavi-entry-points">
<h2>The link between different Mayavi entry points<a class="headerlink" href="#the-link-between-different-mayavi-entry-points" title="Permalink to this headline">¶</a></h2>
<p>Every visualization created in Mayavi is constructed with a pipeline,
although the construction of the pipeline may be hidden from the user:</p>
<ul class="simple">
<li>The easiest way to make a Mayavi visualization is to create a pipeline
via the user interface, as, for instance, exposed in the
<a class="reference internal" href="example_parametric_surface.html#parametric-surfaces-example"><span class="std std-ref">Parametric surfaces examples</span></a>.</li>
<li>The <a class="reference internal" href="mlab_3d_plotting_functions.html#mlab-plotting-functions"><span class="std std-ref">mlab 3d plotting functions</span></a>,
create full piplelines, comprising sources, modules, and possibly
filters, to visualize numpy arrays. Displaying the
<a class="reference internal" href="mlab_changing_object_looks.html#mlab-changing-objects-interactively"><span class="std std-ref">pipeline view</span></a> is the
easiest way to understand what pipeline was built.</li>
<li>Pipelines can also be built node-by-node with mlab, using the
<a class="reference internal" href="mlab_pipeline.html#controlling-the-pipeline-with-mlab-scripts"><span class="std std-ref">mlab.pipeline functions</span></a>.
The name of the functions to call can simply be deduced
from the names of the pipeline nodes as they appear in the pipeline
view.</li>
<li>The objects composing a pipeline can be instantiated and added to the
pipeline manually, as exposed
<a class="reference internal" href="advanced_scripting.html#oo-construction-visualization"><span class="std std-ref">further below</span></a>.</li>
</ul>
</div>
<div class="section" id="a-pipeline-example-examined">
<h2>A pipeline example examined<a class="headerlink" href="#a-pipeline-example-examined" title="Permalink to this headline">¶</a></h2>
<p>Let us study the pipeline created by the <cite>mlab.plot3d</cite> function to
represent lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">import numpy as np</span>
<span class="s2">phi = np.linspace(0., 2*np.pi, 1000)</span>
<span class="s2">x   = np.cos(6*phi)*(1 + .5*np.cos(11*phi))</span>
<span class="s2">y   = np.sin(6*phi)*(1 + .5*np.cos(11*phi))</span>
<span class="s2">z   = .5*np.sin(11*phi)</span>

<span class="s2">from mayavi import mlab</span>
<span class="s2">surface = mlab.plot3d(x, y, z, np.sin(6*phi), tube_radius=0.025, colormap=&#39;Spectral&#39;, opacity=.5)</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/pipeline_and_scene.jpg" src="_images/pipeline_and_scene.jpg" />
</div>
<p>The <cite>mlab.plot3d</cite> function first creates a source made of points
connected by lines. Then it applies the <cite>Stripper</cite> filter, which
transforms this succession of lines in a ‘strip’. Second, a <cite>Tube</cite>
filter is applied: from the ‘strip’ it creates tubes with a given radius.
Finally, the <cite>Surface</cite> module is applied to display the surface of the
tubes. The <cite>surface</cite> object returned by the <cite>mlab.plot3d</cite> function is
that final <cite>Surface</cite> module.</p>
<p>Let us have a look at the data in the pipeline before the tube filter was
applied. First we retrive the <cite>Stripper</cite> filter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">stripper = surface.parent.parent.parent</span>
</pre></div>
</div>
<p>Then we apply on it a <cite>Surface</cite> module to represent the <cite>strip</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">lines = mlab.pipeline.surface(stripper, color=(0, 0, 0))</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/pipeline_and_scene2.jpg" src="_images/pipeline_and_scene2.jpg" />
</div>
<p>All the properties of the different steps can be adjusted in the pipeline
view. In addition, they correspond to attributes on the various objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tubes</span> <span class="o">=</span> <span class="n">surface</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tubes</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">radius</span>
<span class="go">0.025000000000000001</span>
</pre></div>
</div>
<p>The names in the dialogs of the various properties gives hints to which
attributes in the objects they correspond to. However, it can be fairly
challenging to find this correspondance. We suggest to use the
<a class="reference internal" href="mlab_changing_object_looks.html#record-feature"><span class="std std-ref">record feature</span></a> for this purpose.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mayavi-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Organisation of Mayavi visualizations: the pipeline</a><ul>
<li><a class="reference internal" href="#anatomy-of-a-mayavi-pipeline">Anatomy of a Mayavi pipeline</a><ul>
<li><a class="reference internal" href="#layout-of-a-pipeline">Layout of a pipeline</a></li>
<li><a class="reference internal" href="#navigating-in-the-pipeline">Navigating in the pipeline</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-link-between-different-mayavi-entry-points">The link between different Mayavi entry points</a></li>
<li><a class="reference internal" href="#a-pipeline-example-examined">A pipeline example examined</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="advanced_use.html"
                        title="previous chapter">Advanced use of Mayavi</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="data.html"
                        title="next chapter">Data representation in Mayavi</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pipeline.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data.html" title="Data representation in Mayavi"
             >next</a> |</li>
        <li class="right" >
          <a href="advanced_use.html" title="Advanced use of Mayavi"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mayavi 4.6.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced_use.html" >Advanced use of Mayavi</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2018, Enthought Inc..
      Last updated on Aug 08, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>